<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salsopedia - Kato Salsa Hub</title>
    <meta name="description"
        content="Salsopedia - Encyklopedia wiedzy o salsie kubaskiej. Pojcia, figury, muzyka, historia i kultura.">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/jpeg" href="assets/images/logo.jpg">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Animowane to -->
    <div class="animated-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- Navigation (Identical to index.html) -->
    <nav class="nav-bar">
        <div class="nav-brand-group">
            <a href="index.html" class="nav-logo">
                <span class="logo-text">KATO SALSA HUB</span>
                <span class="logo-emoji"></span>
            </a>
            <button id="header-radio-play" class="header-radio-btn" aria-label="Wcz radio">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path d="M8 5v14l11-7z" />
                </svg>
            </button>
        </div>
        <div class="nav-links">
            <a href="index.html#hero">Start</a>
            <a href="index.html#onas">O nas</a>
            <a href="index.html#style">Style</a>
            <a href="salsopedia.html" class="active" style="color: var(--cuban-orange);">Salsopedia</a>
            <a href="index.html#radio">Radio</a>
            <a href="index.html#mapa">Lokacja</a>
            <a href="index.html#kontakt" class="cta-link">Kontakt</a>
        </div>
        <div class="burger-menu">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <!-- Main Content Wrapper for SPA -->
    <main id="app-content">

        <!-- Salsopedia Header -->
        <header class="wiki-header">
            <div class="wiki-header-content">
                <h1>Salsopedia</h1>
                <p>Twoja encyklopedia wiedzy o salsie kubaskiej, muzyce i kulturze.</p>

                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="search-input"
                        placeholder="Szukaj pojcia (np. Vacilala, Timba)...">
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="wiki-main-container">

            <!-- Sidebar Navigation -->
            <aside class="wiki-sidebar">
                <h3>Kategorie</h3>
                <ul class="category-list" id="categoryList">
                    <li data-category="all" class="active">Wszystkie</li>
                    <li data-category="steps">Kroki (Podstawy)</li>
                    <li data-category="figures">Figury (Pary)</li>
                    <li data-category="instruments">Instrumenty</li>
                    <li data-category="music">Muzyka</li>
                    <li data-category="dance">Taniec</li>
                    <li data-category="styles">Style Taca</li>
                    <li data-category="history">Historia</li>
                    <li data-category="gods">Bogowie (Orishas)</li>
                    <li data-category="instructors">Instruktorzy</li>
                    <li data-category="schools">Szkoy Taca</li>
                </ul>

                <div class="sidebar-footer">
                    <button id="showPendingBtn" class="btn-text">
                        <i class="fas fa-history"></i> Oczekujce zmiany
                    </button>
                </div>
            </aside>

            <!-- Terms Grid -->
            <section class="wiki-content">
                <!-- Loading Spinner -->
                <div id="loading" class="loading-spinner">
                    <div class="spinner"></div>
                </div>

                <!-- Loading Spinner -->

                <!-- Terms Grid -->
                <div id="wikiGrid" class="wiki-grid"></div>

                <!-- No Results Message -->
                <div id="noResults" class="no-results hidden">
                    <i class="fas fa-search"></i>
                    <p>Nie znaleziono takiego hasa.</p>
                    <button class="btn-add-inline" onclick="openModal()">Dodaj je!</button>
                </div>
            </section>

        </div>
    </main>


    <!-- Floating Action Button -->
    <button id="addTermBtn" class="fab-add" onclick="openModal()" title="Dodaj nowe haso">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Modal for Adding/Editing Terms -->
    <div id="wikiModal" class="modal-overlay">
        <div class="modal-content wiki-modal">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 id="modalTitle">Dodaj haso</h2>

            <form id="wikiForm">
                <input type="hidden" id="termId" name="id">
                <input type="hidden" id="isVerification" name="verification_request">

                <div class="form-group">
                    <label for="termInput">Haso</label>
                    <input type="text" id="termInput" name="term" required placeholder="np. Enchufla">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Kategorie G贸wne</label>
                        <div id="catSelectContainer" class="custom-select-container"></div>
                        <select id="catSelect" name="category" multiple style="display:none">
                            <option value="steps">Kroki</option>
                            <option value="figures">Figury</option>
                            <option value="instruments">Instrumenty</option>
                            <option value="music">Muzyka</option>
                            <option value="dance" selected>Taniec</option>
                            <option value="styles">Style</option>
                            <option value="history">Historia</option>
                            <option value="gods">Bogowie</option>
                            <option value="instructors">Instruktorzy</option>
                            <option value="schools">Szkoy</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Podkategorie</label>
                        <div id="subSelectContainer" class="custom-select-container"></div>
                        <select id="subSelect" name="subcategory" multiple style="display:none">
                            <option value="lead">Prowadzenie</option>
                            <option value="follow">Pod偶anie</option>
                            <option value="partnerwork">W parach</option>
                            <option value="shines">Solo (Shines)</option>
                            <option value="technique">Technika</option>
                            <option value="rhythm">Rytmika</m>
                        </select>
                    </div>
                </div>

                <div class="form-group" style="margin-top:15px">
                    <label>Proponowana nowa kategoria (opcjonalne)</label>
                    <input type="text" id="userCategoryInput" name="user_category"
                        placeholder="Np. Stroje, Festiwale...">
                </div>

                <div class="form-group">
                    <label>殴r贸da (Link, Ksi偶ka, Instruktor)</label>
                    <div id="sourceContainer">
                        <!-- Source rows injected via JS -->
                    </div>
                    <button type="button" class="btn-add-inline" onclick="addSourceRow()">+ Dodaj kolejne
                        藕r贸do</button>
                </div>

                <div class="form-group auth-group">
                    <div>
                        <label for="authorInput">Tw贸j Podpis (Ksywka)*</label>
                        <input type="text" id="authorInput" name="author" required placeholder="Jak mamy Ci podpisa?">
                    </div>
                    <div>
                        <label for="authorLinkInput">Tw贸j Facebook/Insta (Link)</label>
                        <input type="url" id="authorLinkInput" name="author_link"
                            placeholder="https://facebook.com/...">
                    </div>
                </div>

                <p class="form-note">
                    <i class="fas fa-info-circle"></i> Zgoszenia trafiaj do moderacji i systemu oczekujcych.
                </p>

                <div class="form-group">
                    <label for="definitionInput">Definicja</label>
                    <textarea id="definitionInput" name="definition" rows="5" required
                        placeholder="Opisz to pojcie..."></textarea>
                </div>

                <!-- Honeypot -->
                <input type="text" name="surname" style="display:none">

                <button type="submit" class="btn-submit">Wylij do moderacji</button>
            </form>
            <div id="formMessage"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <h3>KATO SALSA HUB </h3>
                <p>Kubaska energia w sercu lska</p>
            </div>
            <div class="footer-links">
                <a href="index.html#hero">Start</a>
                <a href="index.html#onas">O nas</a>
                <a href="index.html#style">Style</a>
                <a href="index.html#kontakt">Kontakt</a>
                <a href="privacy.html">Polityka Prywatnoci</a>
                <a href="https://dancepuls.katosalsahub.pl/" target="_blank">DancePuls Generator</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="rok">2024</span> Kato Salsa Hub. Wszystkie prawa zastrze偶one.</p>
            <p>Designed with <i class="fas fa-heart" style="color: var(--cuban-red);"></i> by <a
                    href="https://github.com/kpoczatek-dev" target="_blank">Krzysztof Pocztek</a></p>
            <p style="margin-top:10px;"><a href="#" onclick="fetchPendingTerms(); return false;"
                    style="color:#555; text-decoration:none; font-size:0.8rem;">[Moderacja]</a></p>
        </div>
    </footer>


    <script src="assets/js/contact.js"></script>
    <script src="assets/js/cookies.js"></script>
    <script src="assets/js/wiki.js?v=cleanup"></script>
    <script src="assets/js/radio.js"></script>
    <script src="assets/js/home.js"></script>
    <script src="assets/js/router.js"></script>
    <script>
        // Rok in footer
        document.getElementById("rok").textContent = new Date().getFullYear();

        // Burger menu logic (Adapted from index.html)
        const burger = document.querySelector('.burger-menu');
        const navLinks = document.querySelector('.nav-links');

        burger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            burger.classList.toggle('active');
        });
    </script>
</body>

</html>